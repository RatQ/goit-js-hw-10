{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport errorIcon from \"../img/error.svg\";\n\nconst startBtn = document.querySelector('button[data-start]');\nconst input = document.querySelector('#datetime-picker');\nconst daysField = document.querySelector('[data-days]');\nconst hoursField = document.querySelector('[data-hours]');\nconst minutesField = document.querySelector('[data-minutes]');\nconst secondsField = document.querySelector('[data-seconds]');\n\nlet userDate = null;\nlet timerId = null;\n\nstartBtn.disabled = true;\n\nflatpickr(\"#datetime-picker\", {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onClose(selectedDates) {\n    const now = Date.now();\n    const chosenTime = selectedDates[0].getTime();\n\n    if (chosenTime <= now) {\n      iziToast.error({\n        title: \"Error\",\n        message: \"Please choose a date in the future\",\n        iconUrl: errorIcon,\n        backgroundColor: \"red\",\n        theme: \"dark\",\n        position: \"topCenter\"\n      });\n\n      startBtn.disabled = true;\n    } else {\n      startBtn.disabled = false;\n      userDate = chosenTime;\n    }\n  }\n});\n\nstartBtn.addEventListener(\"click\", () => {\n  startBtn.disabled = true;\n  input.disabled = true;\n\n  timerId = setInterval(() => {\n    const currentTime = Date.now();\n    const diff = userDate - currentTime;\n\n    if (diff <= 0) {\n      clearInterval(timerId);\n      input.disabled = false;\n      return;\n    }\n\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(diff / day);\n    const hours = Math.floor((diff % day) / hour);\n    const minutes = Math.floor((diff % hour) / minute);\n    const seconds = Math.floor((diff % minute) / second);\n\n    daysField.textContent = String(days).padStart(2, \"0\");\n    hoursField.textContent = String(hours).padStart(2, \"0\");\n    minutesField.textContent = String(minutes).padStart(2, \"0\");\n    secondsField.textContent = String(seconds).padStart(2, \"0\");\n  }, 1000);\n});"],"names":["startBtn","input","daysField","hoursField","minutesField","secondsField","userDate","timerId","flatpickr","selectedDates","now","chosenTime","iziToast","errorIcon","currentTime","diff","second","minute","hour","day","days","hours","minutes","seconds"],"mappings":"sGAMA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,IAAIC,EAAW,KACXC,EAAU,KAEdP,EAAS,SAAW,GAEpBQ,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CACrB,MAAMC,EAAM,KAAK,MACXC,EAAaF,EAAc,GAAG,QAAO,EAEvCE,GAAcD,GAChBE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,QAASC,EACT,gBAAiB,MACjB,MAAO,OACP,SAAU,WAClB,CAAO,EAEDb,EAAS,SAAW,KAEpBA,EAAS,SAAW,GACpBM,EAAWK,EAEd,CACH,CAAC,EAEDX,EAAS,iBAAiB,QAAS,IAAM,CACvCA,EAAS,SAAW,GACpBC,EAAM,SAAW,GAEjBM,EAAU,YAAY,IAAM,CAC1B,MAAMO,EAAc,KAAK,MACnBC,EAAOT,EAAWQ,EAExB,GAAIC,GAAQ,EAAG,CACb,cAAcR,CAAO,EACrBN,EAAM,SAAW,GACjB,MACD,CAED,MAAMe,EAAS,IACTC,EAASD,EAAS,GAClBE,EAAOD,EAAS,GAChBE,EAAMD,EAAO,GAEbE,EAAO,KAAK,MAAML,EAAOI,CAAG,EAC5BE,EAAQ,KAAK,MAAON,EAAOI,EAAOD,CAAI,EACtCI,EAAU,KAAK,MAAOP,EAAOG,EAAQD,CAAM,EAC3CM,EAAU,KAAK,MAAOR,EAAOE,EAAUD,CAAM,EAEnDd,EAAU,YAAc,OAAOkB,CAAI,EAAE,SAAS,EAAG,GAAG,EACpDjB,EAAW,YAAc,OAAOkB,CAAK,EAAE,SAAS,EAAG,GAAG,EACtDjB,EAAa,YAAc,OAAOkB,CAAO,EAAE,SAAS,EAAG,GAAG,EAC1DjB,EAAa,YAAc,OAAOkB,CAAO,EAAE,SAAS,EAAG,GAAG,CAC3D,EAAE,GAAI,CACT,CAAC"}